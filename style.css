const apiKey = "154f0ccd69271e2445b48f1ad84a05cb";

function getWeather() {
  const city = document.getElementById("cityInput").value;

  fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`)
    .then(response => response.json())
    .then(data => {
      const today = data.list[0];
      const highlights = `
        <h2>Today's Highlights</h2>
        <p>ğŸŒ¡ï¸ Feels like: ${today.main.feels_like}Â°C</p>
        <p>ğŸ’§ Humidity: ${today.main.humidity}%</p>
        <p>ğŸ§­ Pressure: ${today.main.pressure} hPa</p>
        <p>ğŸŒ¬ï¸ Wind: ${today.wind.speed} m/s</p>
      `;
      document.getElementById("weatherDetails").innerHTML = highlights;

      // Forecast for every 8th item (24 hrs)
      const forecastList = data.list.filter((item, index) => index % 8 === 0).slice(0, 5);
      let forecastHTML = "";
      forecastList.forEach(item => {
        const date = new Date(item.dt_txt).toDateString().split(' ').slice(0, 3).join(' ');
        forecastHTML += `
          <div class="forecast-day">
            <h3>${date}</h3>
            <p>ğŸŒ¡ï¸ Temp: ${item.main.temp}Â°C</p>
            <p>â˜ï¸ Weather: ${item.weather[0].main}</p>
            <p>ğŸ’§ Humidity: ${item.main.humidity}%</p>
          </div>
        `;
      });

      document.getElementById("forecast").innerHTML = forecastHTML;
    })
    .catch(error => {
      document.getElementById("weatherDetails").innerHTML = `<p>Error: City not found</p>`;
      document.getElementById("forecast").innerHTML = "";
      console.error("Error:", error);
    });
}
